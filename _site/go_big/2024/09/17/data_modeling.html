<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <title>Data Modeling</title><link type="application/atom+xml" rel="alternate" href="http://localhost:4000/feed.xml" title="thekingofcool&apos;s website" /><link rel="shortcut icon" type="image/x-icon" href="/assets/favicon.ico" />
  <link rel="stylesheet" href="/assets/css/main.css" />

  <link href="https://cdn.jsdelivr.net/gh/gangdong/gangdong.github.io@dev/assets/css/syntax_monokai.css" rel="stylesheet"/>
</head><body a="dark">
    <main class="page-content" aria-label="Content">
      <div class="w">
        <a href="/"><-</a><article>
  <p class="post-meta">
    <time datetime="2024-09-17 00:00:00 +0800">2024-09-17</time>
  </p>
  
  <h1>Data Modeling</h1>

  <h3 id="what-is-data-modeling">What is Data Modeling</h3>
<p>数据建模是指创建数据模型的过程。软件工程中，数据工程师在设计数据库时，会将现实世界的各类数据及其关系进行分析、抽象，从中找出内在联系，并将其形式化描述为数据模型，以此建立信息系统的数据库结构。</p>

<h3 id="why-data-modeling">Why Data Modeling</h3>
<ol>
  <li>帮助理解和组织数据，使其更易于管理和使用；</li>
  <li>通过优化数据结构，提高数据存储和检索的效率；</li>
  <li>定义数据的约束和规则，确保数据的一致性和完整性；</li>
  <li>确保数据模型能够满足业务需求和流程。</li>
</ol>

<h3 id="how-to-model-data">How to Model Data</h3>
<ol>
  <li>Requirement Analysis
    <ul>
      <li>定义和分析业务需求；</li>
      <li>确定数据需求和需要的相应支持。</li>
    </ul>
  </li>
  <li>Conceptual Data Model
    <ul>
      <li>定义实体以及实体之间的关系；</li>
      <li>使用 ER(Entity-relationship) 图来表示数据的高层次结构，常用 <a href="https://www.lucidchart.com/pages/?">Lucidchart</a> 来构建概念模型。</li>
    </ul>
  </li>
  <li>Logical Data Model
    <ul>
      <li>在概念模型的基础上添加更多信息，定义表、列、主键和外键；</li>
      <li>一个概念模型的实现可能需要多个逻辑模型。</li>
    </ul>
  </li>
  <li>Physical Data Model
    <ul>
      <li>根据逻辑模型创建数据库对象，包括数据表的物理位置、物理名字、字段类型以及命名规范；</li>
      <li>考虑数据库的性能、存储和索引。</li>
    </ul>
  </li>
</ol>

<h3 id="data-warehouse">Data Warehouse</h3>
<p>数据仓库 (Data Warehouse) 是一个用于存储和分析大量数据的系统，它通常从多个源系统中提取数据，并进行清洗、转换和加载 (ETL) 供数据分析和 BI 报告使用。数据建模在数据仓库的构建过程中同样尤为重要。</p>

<h4 id="数据仓库建模的类型">数据仓库建模的类型</h4>
<ol>
  <li>Star Schema
    <ul>
      <li>星型模型 (Star Schema) 以事实表 (Fact Table) 为中心，周围是维度表 (Dimension Table)；</li>
      <li>事实表存储度量数据（如: 销售额），维度表存储描述数据（如: 时间、地点、产品）。</li>
    </ul>
  </li>
  <li>Snowflake Schema
    <ul>
      <li>雪花模型 (Snowflake Schema) 是星型模型的扩展，将维度表进一步规范化，分解成多个相关的表；</li>
      <li>它的特点是减少了数据冗余，但是提高了查询的复杂性。</li>
    </ul>
  </li>
  <li>Constellation Schema
    <ul>
      <li>事实星座模型 (Fact Constellation Schema) 包含多个事实表，适用于复杂的业务场景。</li>
    </ul>
  </li>
</ol>

<h3 id="data-lake">Data Lake</h3>
<p>数据湖 (Data Lake) 和数据仓库一样，是存储大量数据的系统，但数据湖不仅用于存储结构化数据，还用来存储半结构化、非结构化数据。数据湖允许以原始格式存储数据，数据的质量和一致性可能较低。它一般用于存储用户行为数据，如网站日志、社交媒体数据、视频等，以进行大数据分析和机器学习。</p>

<h3 id="data-lakehouse">Data Lakehouse</h3>
<p>数据湖仓库 (Data Lakehouse) 结合了数据湖和数据仓库的优点，它既能处理结构化数据，也能处理非结构化数据，同时提供了高效的查询性能和数据管理功能。它的代表产品是由 <a href="https://docs.databricks.com/en/delta/index.html">Databricks</a> 开发的基于 Apache Spark 的开源存储层的 <a href="https://delta.io/">Delta Lake</a>，以及用于大规模数据集的高性能表格式的 <a href="https://iceberg.apache.org/">Apache Iceberg</a>。</p>

<p>关于 Delta Lake 可以参见我的这一篇日志：<a href="_site/go_big/2024/09/19/delta_lake.html">Delta Lake</a>.</p>

<h3 id="数据建模过程中常见问题及应对措施">数据建模过程中常见问题及应对措施</h3>
<blockquote>
  <p><strong>Problem</strong>: 业务需求不清晰，以及项目进行中需求变更频繁</p>

  <p><strong>Solution</strong>:</p>
  <ol>
    <li>深入沟通，明确需求，并编写详细的需求文档；</li>
    <li>采用迭代开发的方法，分阶段完善数据模型</li>
  </ol>
</blockquote>

<blockquote>
  <p><strong>Problem</strong>: 不同数据源数据不一致，数据缺失，数据冗余</p>

  <p><strong>Solution</strong>:</p>
  <ol>
    <li>数据清洗，确保数据的一致性和完整性；</li>
    <li>建立数据验证规则，确保数据的准确性</li>
  </ol>
</blockquote>

<blockquote>
  <p><strong>Problem</strong>: 实体之间关系复杂，数据模型复杂</p>

  <p><strong>Solution</strong>:</p>
  <ol>
    <li>以目的驱动简化模型，避免不必要的复杂度；</li>
    <li>将复杂的数据模型分解为多个模块，分别建模和管理</li>
  </ol>
</blockquote>

<blockquote>
  <p><strong>Problem</strong>: 存储效率低，查询性能差</p>

  <p><strong>Solution</strong>:</p>
  <ol>
    <li>根据实际需求，平衡数据的 Normalization 和 Denormalization；</li>
    <li>为常用查询字段建立索引；</li>
    <li>在数据建模过程中进行性能测试</li>
  </ol>

  <blockquote>
    <p><em>注：</em></p>

    <p><em>1.规范化（Normalization）：规范化是将数据组织成多个相关表的过程，以减少数据冗余和提高数据一致性；</em></p>

    <p><em>2.反规范化（Denormalization）：反规范化是将数据合并到较少的表中，以减少查询时的多表连接，从而提高查询性能</em></p>
  </blockquote>
</blockquote>

<blockquote>
  <p><strong>Problem</strong>: 敏感数据泄露</p>

  <p><strong>Solution</strong>:</p>
  <ol>
    <li>对敏感数据进行加密；</li>
    <li>严格的访问控制策略，确保只有授权的用户可以访问数据</li>
  </ol>
</blockquote>

<p>To be continued…</p>

</article>
      </div>
    </main>
  </body>
</html>