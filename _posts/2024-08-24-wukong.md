---
layout: post
title:  "Build a PC to Play WuKong"
date:   2024-08-24
categories: blog
---
### PC Build List
Total cost is 5310.

| item              | model                             | channel | price |
|:----------------- |:--------------------------------- | ------- | ----- |
| CPU               | AMD R5 7500F                      | PDD     | 929   |
| RAM               | 光威 天策 16g * 2 6400 C32 M      | PDD     | 679   |
| GPU               | GeForce RTX 战斧 4060 DUO 8G      | PDD     | 2108  |
| Heat sink         | 利民 AX120R SE ARGB               | PDD     | 81    |
| Power supply unit | 鑫谷 GM650M 金牌全模              | PDD     | 349   |
| computer case     | 航嘉 S920 全景                    | PDD     | 160   |
| SSD               | 金士顿 480g SSD                   | TMall   | 265   |
| Motherboard       | 技嘉 AMD B650M GAMING WIFI        | JD      | 739   |
| SSD(optional)     | Lexar ARES M.2 pcie4.0 nvmeSSD 1T | TMall   | 521   |

### Create Bootable Windows 11 USB Disk
When the computer is ready, you need a Windows system boot disk. I'll do this on a MacOS.

#### Format USB Disk
Go to Application, find Utilities - Disk Utility;
Choose your Disk, and erase the USB External Physical Volume to MS-DOS (FAT32);
Rename the USB Drive to **WIN11** or whatever you like.

#### Download System Image
Download [Windows 11](https://www.microsoft.com/software-download/windows11) Disk Image (ISO) to your computer;

#### Making a Boot Disk
1. Install wimlib
```
brew install wimlib
```

2. Mount the ISO file into a folder
```
hdiutil mount Downloads/Win11_23H2_English_x64v2.iso
```

3. Copy all Windows ISO contents into the USB Disk
```
rsync -vha --exclude=sources/install.wim /Volumes/CCCOMA_X64FRE_EN-US_DV9/* /Volumes/WIN11
```

4. Split the installation file in two parts if the size is bigger than 4GB
```
wimlib-imagex split /Volumes/CCCOMA_X64FRE_EN-US_DV9/sources/install.wim /Volumes/WIN11/sources/install.swm 3800
```

5. Eject USB device to use it for OS installation.

### Troubleshooting
1. 0 free space when installing the system
**Solution**: There is some content in the SSD, choose 'delete' to erase SSD.

2. The selected disk has an MBR partition table. On EFI system, Windows can only be installed to GPT disks.
**Solution**: 
- Restart the computer, On the Windows installation screen, select 'Repair your computer'; Choose 'Troubleshoot' > 'Command Prompt'.
- Enter `diskpart` to initiate the disk partition process;
- Enter `list disk`. Make a note of the MBR disk number that you want to convert to GPT format;
- Enter `select disk` _`<disk-number>`_, where `<disk-number>` is the MBR disk number to convert;
- Enter `clean` to delete all partitions and volumes on the disk;
- Enter `convert gpt` to convert the MBR disk to the GPT partition format.
The diskpart process notifies you when the conversion completes.